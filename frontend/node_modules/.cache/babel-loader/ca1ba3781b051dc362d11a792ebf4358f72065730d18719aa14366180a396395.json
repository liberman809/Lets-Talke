{"ast":null,"code":"import io from 'socket.io-client';\nimport { addMsg } from './chatActions';\nimport { updateUserChats } from './userActions';\nwindow.addEventListener(\"load\", () => {\n  const socket = io(\"http://localhost:3030\", {\n    withCredentials: true,\n    transports: [\"websocket\"] // חובה אם אתה מקבל בעיה עם polling\n  });\n  socket.on(\"connect\", () => {\n    console.log(\"Connected to WebSocket server. ID:\", socket.id);\n  });\n  socket.on(\"connect_error\", err => {\n    console.error(\"Connection error:\", err);\n  });\n});\nexport function listen(userId) {\n  socket.emit('listen', userId);\n}\nexport function joinChat(chatId) {\n  socket.emit('chat', chatId);\n}\nexport function socketNewMsg(chatId) {\n  socket.emit('newMsg', chatId);\n}\nexport function socketAddUser(userId) {\n  socket.emit('addUser', userId);\n}\nsocket.on('newMsg', function (data) {\n  addMsg(data);\n});\nsocket.on('addUser', function (id) {\n  updateUserChats(id);\n});","map":{"version":3,"names":["io","addMsg","updateUserChats","window","addEventListener","socket","withCredentials","transports","on","console","log","id","err","error","listen","userId","emit","joinChat","chatId","socketNewMsg","socketAddUser","data"],"sources":["C:/Users/ASUS/Desktop/projects/lets talke/frontend/src/store/socket.js"],"sourcesContent":["import io from 'socket.io-client'\r\n\r\nimport{addMsg} from'./chatActions'\r\nimport {updateUserChats} from './userActions'\r\n\r\nwindow.addEventListener(\"load\", () => {\r\n  const socket = io(\"http://localhost:3030\", {\r\n    withCredentials: true,\r\n    transports: [\"websocket\"], // חובה אם אתה מקבל בעיה עם polling\r\n  });\r\n\r\n  socket.on(\"connect\", () => {\r\n    console.log(\"Connected to WebSocket server. ID:\", socket.id);\r\n  });\r\n\r\n  socket.on(\"connect_error\", (err) => {\r\n    console.error(\"Connection error:\", err);\r\n  });\r\n});\r\n\r\nexport function listen(userId){\r\n    socket.emit('listen', userId);\r\n}\r\n\r\nexport function joinChat(chatId){\r\n    socket.emit('chat', chatId);\r\n}\r\n\r\nexport function socketNewMsg(chatId){\r\n    socket.emit('newMsg', chatId);\r\n}\r\n\r\nexport function socketAddUser(userId){\r\n    socket.emit('addUser', userId);\r\n}\r\n\r\n\r\nsocket.on('newMsg', function(data){\r\n    addMsg(data)\r\n})\r\n\r\nsocket.on('addUser',function(id){\r\n    updateUserChats(id)\r\n})"],"mappings":"AAAA,OAAOA,EAAE,MAAM,kBAAkB;AAEjC,SAAOC,MAAM,QAAM,eAAe;AAClC,SAAQC,eAAe,QAAO,eAAe;AAE7CC,MAAM,CAACC,gBAAgB,CAAC,MAAM,EAAE,MAAM;EACpC,MAAMC,MAAM,GAAGL,EAAE,CAAC,uBAAuB,EAAE;IACzCM,eAAe,EAAE,IAAI;IACrBC,UAAU,EAAE,CAAC,WAAW,CAAC,CAAE;EAC7B,CAAC,CAAC;EAEFF,MAAM,CAACG,EAAE,CAAC,SAAS,EAAE,MAAM;IACzBC,OAAO,CAACC,GAAG,CAAC,oCAAoC,EAAEL,MAAM,CAACM,EAAE,CAAC;EAC9D,CAAC,CAAC;EAEFN,MAAM,CAACG,EAAE,CAAC,eAAe,EAAGI,GAAG,IAAK;IAClCH,OAAO,CAACI,KAAK,CAAC,mBAAmB,EAAED,GAAG,CAAC;EACzC,CAAC,CAAC;AACJ,CAAC,CAAC;AAEF,OAAO,SAASE,MAAMA,CAACC,MAAM,EAAC;EAC1BV,MAAM,CAACW,IAAI,CAAC,QAAQ,EAAED,MAAM,CAAC;AACjC;AAEA,OAAO,SAASE,QAAQA,CAACC,MAAM,EAAC;EAC5Bb,MAAM,CAACW,IAAI,CAAC,MAAM,EAAEE,MAAM,CAAC;AAC/B;AAEA,OAAO,SAASC,YAAYA,CAACD,MAAM,EAAC;EAChCb,MAAM,CAACW,IAAI,CAAC,QAAQ,EAAEE,MAAM,CAAC;AACjC;AAEA,OAAO,SAASE,aAAaA,CAACL,MAAM,EAAC;EACjCV,MAAM,CAACW,IAAI,CAAC,SAAS,EAAED,MAAM,CAAC;AAClC;AAGAV,MAAM,CAACG,EAAE,CAAC,QAAQ,EAAE,UAASa,IAAI,EAAC;EAC9BpB,MAAM,CAACoB,IAAI,CAAC;AAChB,CAAC,CAAC;AAEFhB,MAAM,CAACG,EAAE,CAAC,SAAS,EAAC,UAASG,EAAE,EAAC;EAC5BT,eAAe,CAACS,EAAE,CAAC;AACvB,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
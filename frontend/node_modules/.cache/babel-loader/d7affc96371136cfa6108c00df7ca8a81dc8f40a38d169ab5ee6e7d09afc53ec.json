{"ast":null,"code":"import { io } from \"socket.io-client\";\nimport { addMsg } from \"./chatActions\";\nimport { updateUserChats } from \"./userActions\";\nlet socket = null;\nexport function initSocket() {\n  if (!socket) {\n    socket = io(\"http://localhost:3030\", {\n      withCredentials: true\n    });\n    socket.on(\"connect\", () => {\n      console.log(\"Connected to WebSocket:\", socket.id);\n    });\n    socket.on(\"newMsg\", function (data) {\n      addMsg(data);\n    });\n    socket.on(\"addUser\", function (id) {\n      updateUserChats(id);\n    });\n    socket.on(\"connect_error\", err => {\n      console.error(\"Socket connection error:\", err);\n    });\n  }\n  return socket;\n}\nexport function listen(userId) {\n  if (socket) socket.emit(\"listen\", userId);\n}\nexport function joinChat(chatId) {\n  if (socket) socket.emit(\"chat\", chatId);\n}\nexport function socketNewMsg(chatId) {\n  if (socket) socket.emit(\"newMsg\", chatId);\n}\nexport function socketAddUser(userId) {\n  if (socket) socket.emit(\"addUser\", userId);\n}","map":{"version":3,"names":["io","addMsg","updateUserChats","socket","initSocket","withCredentials","on","console","log","id","data","err","error","listen","userId","emit","joinChat","chatId","socketNewMsg","socketAddUser"],"sources":["C:/Users/ASUS/Desktop/projects/lets talke/frontend/src/store/socket.js"],"sourcesContent":["import { io } from \"socket.io-client\";\r\nimport { addMsg } from \"./chatActions\";\r\nimport { updateUserChats } from \"./userActions\";\r\n\r\nlet socket = null;\r\n\r\nexport function initSocket() {\r\n  if (!socket) {\r\n    socket = io(\"http://localhost:3030\", {\r\n      withCredentials: true,\r\n    });\r\n\r\n    socket.on(\"connect\", () => {\r\n      console.log(\"Connected to WebSocket:\", socket.id);\r\n    });\r\n\r\n    socket.on(\"newMsg\", function (data) {\r\n      addMsg(data);\r\n    });\r\n\r\n    socket.on(\"addUser\", function (id) {\r\n      updateUserChats(id);\r\n    });\r\n\r\n    socket.on(\"connect_error\", (err) => {\r\n      console.error(\"Socket connection error:\", err);\r\n    });\r\n  }\r\n  return socket;\r\n}\r\n\r\nexport function listen(userId) {\r\n  if (socket) socket.emit(\"listen\", userId);\r\n}\r\n\r\nexport function joinChat(chatId) {\r\n  if (socket) socket.emit(\"chat\", chatId);\r\n}\r\n\r\nexport function socketNewMsg(chatId) {\r\n  if (socket) socket.emit(\"newMsg\", chatId);\r\n}\r\n\r\nexport function socketAddUser(userId) {\r\n  if (socket) socket.emit(\"addUser\", userId);\r\n}\r\n"],"mappings":"AAAA,SAASA,EAAE,QAAQ,kBAAkB;AACrC,SAASC,MAAM,QAAQ,eAAe;AACtC,SAASC,eAAe,QAAQ,eAAe;AAE/C,IAAIC,MAAM,GAAG,IAAI;AAEjB,OAAO,SAASC,UAAUA,CAAA,EAAG;EAC3B,IAAI,CAACD,MAAM,EAAE;IACXA,MAAM,GAAGH,EAAE,CAAC,uBAAuB,EAAE;MACnCK,eAAe,EAAE;IACnB,CAAC,CAAC;IAEFF,MAAM,CAACG,EAAE,CAAC,SAAS,EAAE,MAAM;MACzBC,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEL,MAAM,CAACM,EAAE,CAAC;IACnD,CAAC,CAAC;IAEFN,MAAM,CAACG,EAAE,CAAC,QAAQ,EAAE,UAAUI,IAAI,EAAE;MAClCT,MAAM,CAACS,IAAI,CAAC;IACd,CAAC,CAAC;IAEFP,MAAM,CAACG,EAAE,CAAC,SAAS,EAAE,UAAUG,EAAE,EAAE;MACjCP,eAAe,CAACO,EAAE,CAAC;IACrB,CAAC,CAAC;IAEFN,MAAM,CAACG,EAAE,CAAC,eAAe,EAAGK,GAAG,IAAK;MAClCJ,OAAO,CAACK,KAAK,CAAC,0BAA0B,EAAED,GAAG,CAAC;IAChD,CAAC,CAAC;EACJ;EACA,OAAOR,MAAM;AACf;AAEA,OAAO,SAASU,MAAMA,CAACC,MAAM,EAAE;EAC7B,IAAIX,MAAM,EAAEA,MAAM,CAACY,IAAI,CAAC,QAAQ,EAAED,MAAM,CAAC;AAC3C;AAEA,OAAO,SAASE,QAAQA,CAACC,MAAM,EAAE;EAC/B,IAAId,MAAM,EAAEA,MAAM,CAACY,IAAI,CAAC,MAAM,EAAEE,MAAM,CAAC;AACzC;AAEA,OAAO,SAASC,YAAYA,CAACD,MAAM,EAAE;EACnC,IAAId,MAAM,EAAEA,MAAM,CAACY,IAAI,CAAC,QAAQ,EAAEE,MAAM,CAAC;AAC3C;AAEA,OAAO,SAASE,aAAaA,CAACL,MAAM,EAAE;EACpC,IAAIX,MAAM,EAAEA,MAAM,CAACY,IAAI,CAAC,SAAS,EAAED,MAAM,CAAC;AAC5C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}